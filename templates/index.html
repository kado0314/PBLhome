<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>アプリポータル</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Lexend:wght@300;500;800&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;500;700&display=swap" rel="stylesheet">
    
    <style>
        body {
            font-family: 'Lexend', 'Noto Sans JP', sans-serif;
            overflow: hidden;
            margin: 0;
            padding: 0;
        }

        /* Custom utility for absolute centering */
        .absolute-center {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        /* Background Gradient Blur Blob */
        .bg-blob {
            position: absolute;
            border-radius: 50%;
            filter: blur(80px);
            opacity: 0.6;
            z-index: -1;
            transition: background-color 1s ease;
        }

        /* Main visual styling to mimic the 'Cans' */
        .hero-visual {
            filter: drop-shadow(0 20px 30px rgba(0,0,0,0.3));
            transition: color 0.5s ease;
        }

        /* Navigation Buttons */
        .nav-btn {
            transition: all 0.3s ease;
            backdrop-filter: blur(5px);
        }
        .nav-btn:hover {
            transform: scale(1.1);
            background-color: rgba(255, 255, 255, 0.3);
        }
        .nav-btn:active {
            transform: scale(0.95);
        }

        /* Floating animation helper class */
        .floating {
            will-change: transform;
        }

        /* Visit Button styling */
        .visit-btn {
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }
        .visit-btn::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            transition: 0.5s;
        }
        .visit-btn:hover::after {
            left: 100%;
        }
    </style>
</head>
<body class="h-screen w-screen bg-gray-900 text-white relative">

    <div id="bgBlob" class="bg-blob w-[500px] h-[500px] absolute-center"></div>

    <nav class="absolute top-0 left-0 w-full p-6 flex justify-between items-center z-50">
        <div class="text-2xl font-bold tracking-tighter" id="navLogo">
            Q株式会社
        </div>
        <div class="text-sm opacity-70 hidden sm:block font-light">
            機能を選択してください
        </div>
    </nav>

    <main class="w-full h-full relative flex items-center justify-center">
        
        <h1 id="bgText" class="absolute-center text-[15vw] sm:text-[18vw] font-extrabold opacity-10 select-none whitespace-nowrap tracking-tighter z-0 transition-colors duration-700 text-white">
            FASHION
        </h1>

        <div id="particles" class="absolute inset-0 overflow-hidden pointer-events-none z-0">
            <i class="fa-solid fa-star absolute text-4xl opacity-20 top-1/4 left-1/4 particle"></i>
            <i class="fa-solid fa-circle absolute text-2xl opacity-20 bottom-1/3 right-1/4 particle"></i>
            <i class="fa-solid fa-square absolute text-5xl opacity-20 top-1/3 right-1/3 particle"></i>
        </div>

        <div class="relative z-10 w-full max-w-6xl mx-auto grid grid-cols-1 lg:grid-cols-2 gap-8 items-center px-6">
            
            <div class="text-center lg:text-left order-2 lg:order-1 mt-10 lg:mt-0">
                <h2 id="slideTitle" class="text-4xl sm:text-6xl font-bold mb-3 slide-element">
                    Saiten
                </h2>
                <p id="slideDesc" class="text-lg sm:text-xl opacity-80 mb-10 max-w-md mx-auto lg:mx-0 font-light leading-relaxed slide-element">
                    あなたのコーディネートをAIが採点。<br>今日のファッションをおしゃれにアップデートしよう。
                </p>
                
                <div class="slide-element">
                    <a id="visitLink" href="#" class="visit-btn inline-flex items-center gap-4 bg-white text-black px-10 py-4 rounded-full font-bold text-lg shadow-lg hover:shadow-xl transform hover:-translate-y-1">
                        <span>アプリを開く</span>
                        <i class="fa-solid fa-arrow-right"></i>
                    </a>
                </div>
            </div>

            <div class="relative h-[40vh] lg:h-[60vh] flex items-center justify-center order-1 lg:order-2">
                <div id="heroVisual" class="hero-visual text-[150px] sm:text-[200px] lg:text-[250px] text-blue-500 floating">
                    <i class="fa-solid fa-shirt"></i>
                </div>
            </div>
        </div>

        <div class="absolute bottom-10 w-full flex justify-center md:justify-end px-10 gap-6 z-20">
            <button id="prevBtn" class="nav-btn w-16 h-16 rounded-full border border-white/30 flex items-center justify-center text-xl bg-white/10 hover:bg-white/20">
                <i class="fa-solid fa-chevron-left"></i>
            </button>
            <button id="nextBtn" class="nav-btn w-16 h-16 rounded-full border border-white/30 flex items-center justify-center text-xl bg-white/10 hover:bg-white/20">
                <i class="fa-solid fa-chevron-right"></i>
            </button>
        </div>
    </main>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>

    <script>
        // --- Data Configuration ---
        const slides = [
            {
                id: "saiten",
                title: "ファッション採点",
                bgText: "FASHION",
                desc: "AIがあなたのコーディネートを瞬時に採点。客観的なスコアで、毎日のファッション選びをもっと楽しく。",
                // ▼▼▼ 修正箇所: FlaskのルートURLへ変更 ▼▼▼
                url: "/scoring/saiten",
                color: "#ec4899", // pink-500
                darkColor: "#831843", // pink-900
                icon: "fa-shirt",
                particles: ["fa-gem", "fa-tag", "fa-star"]
            },
            {
                id: "playground",
                title: "背後検知システム",
                bgText: "SECURITY",
                desc: "Webカメラを活用した防犯システム。背後に人が近づいたことを検知し、即座に通知画面でお知らせします。",
                // ▼▼▼ 修正箇所: Privacyフォルダ内のパスへ変更 ▼▼▼
                url: "Privacy/index.html",
                color: "#6366f1", // indigo-500
                darkColor: "#312e81", // indigo-900
                icon: "fa-video",
                particles: ["fa-eye", "fa-bell", "fa-user-shield"]
            },
            {
                id: "typamera",
                title: "タイピング",
                bgText: "TYPING",
                desc: "カメラ機能と連動した究極のタイピングゲーム。スピードと正確性が試されます。",
                // ▼▼▼ 修正箇所: Typameraフォルダ内のパスへ変更 ▼▼▼
                url: "Typamera/templates/typing.html",
                color: "#fbbf24", // amber-400
                darkColor: "#78350f", // amber-900
                icon: "fa-keyboard",
                particles: ["fa-bolt", "fa-font", "fa-stopwatch"]
            }
        ];

        let currentIndex = 0;
        let isAnimating = false;

        // --- DOM Elements ---
        const bgBlob = document.getElementById('bgBlob');
        const bgText = document.getElementById('bgText');
        const slideTitle = document.getElementById('slideTitle');
        const slideDesc = document.getElementById('slideDesc');
        const visitLink = document.getElementById('visitLink');
        const heroVisual = document.getElementById('heroVisual');
        const nextBtn = document.getElementById('nextBtn');
        const prevBtn = document.getElementById('prevBtn');
        const particleContainer = document.getElementById('particles');

        // --- Init ---
        function init() {
            updateSlide(0, 1); // Direction 1 = forward
            startFloatingAnimation();
        }

        // --- Animation Functions ---
        
        function startFloatingAnimation() {
            // Main Hero Float
            gsap.to("#heroVisual", {
                y: -30,
                rotation: 5,
                duration: 2.5,
                yoyo: true,
                repeat: -1,
                ease: "sine.inOut"
            });

            // Particles Float (Randomized)
            gsap.utils.toArray(".particle").forEach(part => {
                gsap.to(part, {
                    x: "random(-50, 50)",
                    y: "random(-50, 50)",
                    rotation: "random(-180, 180)",
                    duration: "random(3, 6)",
                    yoyo: true,
                    repeat: -1,
                    ease: "sine.inOut"
                });
            });
        }

        function changeSlide(direction) {
            if (isAnimating) return;
            isAnimating = true;

            let nextIndex = currentIndex + direction;
            if (nextIndex >= slides.length) nextIndex = 0;
            if (nextIndex < 0) nextIndex = slides.length - 1;

            // 1. Animate OUT
            const tl = gsap.timeline({
                onComplete: () => {
                    currentIndex = nextIndex;
                    updateSlide(nextIndex, direction);
                }
            });

            // Hero shoots up or down
            tl.to("#heroVisual", {
                y: direction > 0 ? -window.innerHeight : window.innerHeight,
                rotation: direction > 0 ? -45 : 45,
                opacity: 0,
                duration: 0.6,
                ease: "power3.in"
            }, 0);

            // Text slides away
            tl.to(".slide-element", {
                x: direction > 0 ? -100 : 100,
                opacity: 0,
                duration: 0.4,
                stagger: 0.05
            }, 0);

            // Background text fades
            tl.to("#bgText", {
                scale: 1.5,
                opacity: 0,
                duration: 0.5
            }, 0);
        }

        function updateSlide(index, direction) {
            const data = slides[index];

            // Update Content
            slideTitle.innerText = data.title;
            slideDesc.innerText = data.desc;
            bgText.innerText = data.bgText;
            visitLink.href = data.url;
            
            // Update Colors
            heroVisual.style.color = data.color;
            bgBlob.style.backgroundColor = data.color;
            document.body.style.background = `radial-gradient(circle at center, ${data.darkColor}, #111827)`;
            
            // Update Icon
            heroVisual.innerHTML = `<i class="fa-solid ${data.icon}"></i>`;

            // Update Particles
            const particles = document.querySelectorAll('.particle');
            particles.forEach((p, i) => {
                // Reset classes
                p.className = `fa-solid ${data.particles[i % data.particles.length]} absolute text-4xl opacity-20 particle`;
                // Randomize position slightly for freshness
                p.style.top = Math.random() * 80 + 10 + "%";
                p.style.left = Math.random() * 80 + 10 + "%";
            });

            // 2. Animate IN
            const tl = gsap.timeline({
                onComplete: () => {
                    isAnimating = false;
                    // Re-initiate floating specifically for the new hero (resetting transforms)
                    gsap.fromTo("#heroVisual", 
                        { y: 0, rotation: 0 },
                        { y: -30, rotation: 5, duration: 2.5, yoyo: true, repeat: -1, ease: "sine.inOut" }
                    );
                }
            });

            // Hero falls in
            tl.fromTo("#heroVisual", 
                { 
                    y: direction > 0 ? window.innerHeight : -window.innerHeight,
                    x: 0,
                    rotation: direction > 0 ? 45 : -45,
                    opacity: 0 
                },
                { 
                    y: 0, 
                    rotation: 0,
                    opacity: 1, 
                    duration: 1, 
                    ease: "elastic.out(1, 0.6)" 
                }
            );

            // Text slides in
            tl.fromTo(".slide-element",
                { 
                    x: direction > 0 ? 50 : -50, 
                    opacity: 0 
                },
                { 
                    x: 0, 
                    opacity: 1, 
                    duration: 0.5, 
                    stagger: 0.1, 
                    ease: "power2.out" 
                }, 
                "-=0.8"
            );

            // BG Text zooms in
            tl.fromTo("#bgText",
                { scale: 0.5, opacity: 0 },
                { scale: 1, opacity: 0.1, duration: 0.8, ease: "back.out(1.7)" },
                "-=0.8"
            );
        }

        // --- Event Listeners ---
        nextBtn.addEventListener('click', () => changeSlide(1));
        prevBtn.addEventListener('click', () => changeSlide(-1));

        // Keyboard navigation
        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowRight') changeSlide(1);
            if (e.key === 'ArrowLeft') changeSlide(-1);
        });

        // Initial Start
        init();

    </script>
</body>
</html>
